(this["webpackJsonpwuhan-fighting"]=this["webpackJsonpwuhan-fighting"]||[]).push([[0],{107:function(e,t,a){e.exports=a(202)},112:function(e,t,a){},192:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(3),o=a.n(i),c=(a(112),a(104),a(94)),s=a(25),u=r.a.createContext(null),l=(a(203),a(68)),m=(a(116),a(14)),g=(a(118),a(50)),f=a(103),d=a(98),p=a.n(d).a.create({baseURL:"https://lab.isaaclin.cn/nCoV",timeout:5e3});p.interceptors.response.use((function(e){if(200===e.status)return e.data}),(function(e){return Promise.reject(e.response)}));var h=p,y=a(65),b=a.n(y),v=Object(s.a)((function(){var e=Object(n.useContext)(u).store,t=Object(n.useState)(["summarize"]),a=Object(f.a)(t,2),i=a[0],o=a[1],c=[{key:"summarize",icon:"info-circle",title:"\u6982\u62ec",url:"/api/overall",axiosIf:"{}"===JSON.stringify(e.getData)},{key:"trend",icon:"area-chart",title:"\u8d8b\u52bf",url:"",axiosIf:!1},{key:"map",icon:"pie-chart",title:"\u5730\u56fe",url:"/api/area",axiosIf:"[{}]"===JSON.stringify(e.getMapData)}];return Object(n.useEffect)((function(){var t=c.find((function(e){return e.key===i[0]}));t&&t.url&&t.axiosIf&&(e.setLoading(!0),h({method:"GET",url:t?t.url:""}).then((function(t){switch(i[0]){case"summarize":e.setData(t.results),localStorage.setItem("cache",JSON.stringify(t.results));break;case"map":e.setMapData(t.results),localStorage.setItem("mapCache",JSON.stringify(t.results))}e.setLoading(!1)})).catch((function(){var t;switch(e.setLoading(!1),i[0]){case"summarize":null!=(t=JSON.parse(localStorage.getItem("cache")))&&(g.a.error("\u670d\u52a1\u5668\u9519\u8bef\uff0c\u5df2\u4f7f\u7528\u7f13\u5b58\u6570\u636e\uff0c\u66f4\u65b0\u65f6\u95f4".concat(b()(t[0].updateTime).format("YYYY-MM-DD HH:mm:ss"))),e.setData(t));break;case"map":null!==(t=JSON.parse(localStorage.getItem("mapCache")))&&(g.a.error("\u670d\u52a1\u5668\u9519\u8bef\uff0c\u5df2\u4f7f\u7528\u7f13\u5b58\u6570\u636e\uff0c\u66f4\u65b0\u65f6\u95f4".concat(b()(t[0].updateTime).format("YYYY-MM-DD HH:mm:ss"))),e.setData(t))}t||g.a.error("\u670d\u52a1\u5668\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})))}),[i,e]),r.a.createElement(l.a,{defaultSelectedKeys:i,mode:"horizontal",onClick:function(t){console.log(t),o([t.key]),e.setMenuKey(t.key)}},c.map((function(e){return r.a.createElement(l.a.Item,{key:e.key},r.a.createElement(m.a,{type:e.icon}),e.title)})))})),O=Object(s.a)((function(){var e=Object(n.useContext)(u).store,t=e.getData[0]||{};return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},function(){switch(e.getMenuKey){case"summarize":var n=r.a.lazy((function(){return Promise.all([a.e(4),a.e(7)]).then(a.bind(null,743))}));return r.a.createElement(n,{data:t});case"trend":var i=r.a.lazy((function(){return a.e(6).then(a.bind(null,744))}));return r.a.createElement(i,{data:t});case"map":var o=r.a.lazy((function(){return Promise.all([a.e(2),a.e(5)]).then(a.bind(null,745))}));return r.a.createElement(o,null)}}()))})),D=(a(192),Object(s.a)((function(){var e=Object(s.b)({data:{},mapData:[{}],loading:!1,menuKey:"summarize",setData:function(t){e.data=JSON.parse(JSON.stringify(t))},setLoading:function(t){e.loading=t},setMenuKey:function(t){e.menuKey=t},setMapData:function(t){e.mapData=t},get getData(){return JSON.parse(JSON.stringify(e.data))},get getLoading(){return e.loading},get getMenuKey(){return e.menuKey},get getMapData(){return e.mapData}});return r.a.createElement(u.Provider,{value:{store:e}},r.a.createElement(c.a,{spinning:e.getLoading},r.a.createElement("div",{className:"App"},r.a.createElement(v,null),r.a.createElement(O,null))))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(201);o.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[107,1,3]]]);
//# sourceMappingURL=main.dd5cecef.chunk.js.map